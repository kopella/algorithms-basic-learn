# 动态规划（Dynamic Programming）学习笔记

## 概述

### 什么是动态规划？

动态规划与分治方法相似，都是通过**组合子问题的解**来求解原问题。动态规划应用于**子问题重叠**的情况，即不同的子问题具有**公共**的子子问题。

### 动态规划的用途是？

动态规划方法通常用来求解最优化问题 (optimization problem) 。这类问题可以有很多个可行解，每个解都有一个值，而问题需要具有最优值（最小值或最大值）的解。

### 如何设计动态规划算法？

1. 刻画一个最优解的结构特征。
2. 递归地定义最优解的值。
3. 计算最优解的值，通常采用自底向上的方法。
4. 利用计算出的信息构造一个最优解。

步骤 1~3 是动态规划算法求解问题的基础。如果我们仅仅需要一个最优解的值，而非解本身，可以忽略步骤 。如果确实要做步骤 4, 有时就需要在执行步骤 的过程中维一些额外信息，以便用来构造一个最优解。

## 原理

适合应用动态规划方法求解的最优化问题应该具备两个性质：**最优子结构**和**子问题重叠**。

### 最优子结构

如果一个问题的最优解包含其子问题的最优解，则称此问题具有最优子结构。使用动态规划算法时，可以使用子问题的最优解来构造原问题的最优解。

> 注意，具有最优子结构也可能意味着该问题适合贪心策略。

证明问题具有最优子结构遵循着如下的通用模式：

1. 证明问题的最优解的第一个组成部分是做出一个选择，做出这次选择后会产生一个或多个待解的子问题。
2. 对于一个给定问题，在其可能的第一步选择中，假定已经只知道哪种选择才会得到最优解。
3. 给定可获得最优解的选择后，确定这次选择会产生哪些子问题，并刻画出子问题空间。子问题空间应尽可能简单，只在必要时扩展它。
4. 证明作为原问题的最优解的组成部分，每个子问题的解就是它本身的最优解。一般可以用反证法证明。

> 一个寻找最优子结构的例子：在一个无权图中，寻找一条从 u 到 v 的最短路径。
>
> 由于从 u 到 v 的任意路径必须包含一个中间顶点，假定最短路径会经过 w，这样 u 到 v 的路径可以分割为 u 到 w 与 w 到 v。显然，u 到 v 的路径长度与  u 到 w 加上 w 到 v 的路径长度相等。（1~3）
>
> 可以使用反证法证明，当 u 到 v 的路径长度最短时，u 到 w 与 w 到 v 的路径长度同样也是最短的。（4）
>
> 这样，就可以考察所有的中间顶点来求 u 到 v 的最短路径，对每一个中间顶点 w，求 u 到 w 与 w 到 v 的最短路径，然后选择两条路径之和最短的顶点 w。

需要注意的是，最优子结构需要保证子问题是独立的，即，一个子问题的解不会影响到另一个子问题的解。

### 重叠子问题

如果递归算法反复求解相同的子问题，则称此问题具有重叠子问题。使用动态规划算法时，常将每一个求解了一次的子问题解存入一个表中，当再次需要这个子问题时直接查表。

> 注意，采取分治方法求解的问题通常在递归的每一步都生成了全新的子问题。

动态规划算法利用重叠子问题的性质能将递归算法的指数阶运行时间降低的次方阶。通常一个适用动态规划算法的问题可以使用带备忘的自顶向下方法和自底向上方法。

> 一般来说，自底向上方法会比带备忘的自顶向下方法快，因为自底向上算法没有递归调用的开销。备忘方法的优势体现在那些子问题空间存在不需要求解的子问题时，因为备忘方法只会求解那些绝对必要的子问题。
